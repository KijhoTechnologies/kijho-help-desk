{% extends 'HelpDeskBundle:Client:main.html.twig' %}

{% block main_content %}

    <div class="row">
        <aside class="col-md-3 sidebar">
            {% include 'HelpDeskBundle:Client:menu.html.twig' %}
        </aside>
        <main class="col-md-9 ticket-list cf" id="articles-list">

            <h3 id="public_tickets">{{'help_desk.tickets.my_tickets'|trans}}</h3>
            <hr>
            <div class="home-theme-filter" style="text-align: left; margin-bottom: 10px;">
                <a href="{{path('help_desk_client_my_tickets',{'status' : 'all'})}}" class="{% if status == 'all' %}active{% endif %} pjax">{{'help_desk.global.all'|trans|upper}}</a>
                <a href="{{path('help_desk_client_my_tickets',{'status' : 'open'})}}" class="{% if status == 'open' %}active{% endif %} pjax">{{'help_desk.global.open'|trans|upper}}</a>
                <a href="{{path('help_desk_client_my_tickets',{'status' : 'closed'})}}" class="{% if status == 'closed' %}active{% endif %} pjax">{{'help_desk.global.closed'|trans|upper}}</a>
                <a class="btn btn-success pull-right btn-color-white" href="{{path('help_desk_client_new_ticket')}}">{{'help_desk.ticket_creation.create_a_ticket'|trans|upper}}</a>
            </div>

            <article class="post full-width">

                {% if tickets|length > 0 %}
                    <table class="table table-bordered">
                        <tr>
                            <th>{{'help_desk.global.date'|trans}}</th>
                            <th>{{'help_desk.tickets.status'|trans}}</th>
                            <th>{{'help_desk.tickets.category'|trans}}</th>
                            <th>{{'help_desk.tickets.subject'|trans}}</th>
                            <th>{{'help_desk.tickets.priority'|trans}}</th>
                            <th>{{'help_desk.tickets.operator'|trans}}</th>
                            <th>{{'help_desk.global.options'|trans}}</th>
                        </tr>
                        {% for ticket in tickets %}
                            <tr>
                                <td>{{ticket.creationDate|date('d/m/Y h:i a')}}</td>
                                <td>{{ticket.textStatus()|trans}}</td>
                                <td>{{ticket.category.name}}</td>
                                <td>{{ticket.subject}}</td>
                                <td>{{ticket.textPriority()|trans}}</td>
                                <td>{{ticket.operator.name|default('Not Assigned')}}</td>
                                <td>&nbsp;</td>
                            </tr>
                        {% endfor %}
                    </table>
                {% else %}
                    <p>{{'help_desk.tickets.empty_list'|trans}}</p>
                {% endif %}
            </article>
        </main>
    </div><!-- row -->
{% endblock %}